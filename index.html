<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>è²ªé£Ÿè›‡ Snake + è‹±æ–‡å–®å­—æ¨¡å¼</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --panel:#111827cc; /* gray-900/80 */
      --text:#e5e7eb; /* gray-200 */
      --muted:#94a3b8; /* slate-400 */
      --accent:#22c55e; /* green-500 */
      --accent-2:#16a34a; /* green-600 */
      --danger:#ef4444; /* red-500 */
      --grid:#1f2937; /* gray-800 */
      --cell:#0b1224;
      --tile1:#f59e0b; /* amber-500 */
      --tile2:#b45309; /* amber-700 */
      --ok:#34d399; /* emerald-400 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 800px at 70% -10%, #1f2937, var(--bg));
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text); display:flex; align-items:center; justify-content:center; padding:16px;
    }
    .app{ width: min(100%, 820px); }
    .header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
    .title{ font-weight:800; letter-spacing:.5px; font-size: clamp(20px, 3vw, 28px);}    
    .panel{ background:linear-gradient(180deg, #0b1224, #0a0f1f); border:1px solid #1f2937; border-radius:16px; box-shadow: 0 10px 30px #0008; }
    .hud{ display:flex; align-items:center; justify-content:space-between; padding:12px 16px; gap:10px; flex-wrap:wrap }
    .hud .stat{ display:flex; gap:6px; align-items:center; font-variant-numeric: tabular-nums; }
    .hud .stat b{ font-size:18px }
    .hud .chip{ padding:6px 10px; border-radius:999px; background:#0b1224; border:1px solid #1f2937; color:var(--muted)}

    .wordbox{ display:flex; align-items:center; gap:10px; }
    #wordView{ font-weight:800; letter-spacing:2px; font-size: clamp(16px, 3vw, 22px)}
    #wordView .ok{ color:var(--ok) }
    #wordView .todo{ color:var(--muted) }
    #nextLetter{ padding:2px 8px; border-radius:10px; border:1px dashed #334155; color:#f8fafc; background:#0b1224 }

    .canvas-wrap{ position:relative; padding:12px; }
    canvas{ width:100%; height:auto; display:block; background:linear-gradient(180deg, #0a1326, #091021); border-radius:12px; border:1px solid #1e293b; }

    .controls{ display:grid; grid-template-columns:1fr auto; gap:12px; padding:12px 16px; border-top:1px solid #1e293b; }
    .btn{ background:#0b1224; border:1px solid #1f2937; color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600; transition: transform .08s ease, background .2s ease, border-color .2s ease; user-select:none; }
    .btn:hover{ background:#0e1630 }
    .btn:active{ transform: translateY(1px) }
    .btn.primary{ background:linear-gradient(180deg, var(--accent), var(--accent-2)); border-color:#065f46 }
    .btn.danger{ background:linear-gradient(180deg, #ef4444, #b91c1c); border-color:#7f1d1d }

    .uploader{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
    .uploader input[type=file]{ background:#0b1224; color:var(--text); border:1px solid #1f2937; padding:8px; border-radius:10px }

    .dpad{ display:grid; grid-template-columns:64px 64px 64px; grid-template-rows:64px 64px 64px; gap:10px; justify-content:center; margin-left:auto; }
    .dpad .pad{ display:flex; align-items:center; justify-content:center; background:#0b1224; border:1px solid #1f2937; border-radius:14px; font-size:20px; cursor:pointer; }
    .dpad .pad:active{ transform: translateY(1px) }
    .pad.empty{ visibility:hidden }

    .footer{ margin-top:14px; color:var(--muted); font-size:12px; text-align:center }
    .links{ display:flex; gap:10px; justify-content:center; margin-top:6px }
    .link{ color:#93c5fd; text-decoration:none }

    @media (max-width: 520px){
      .controls{ grid-template-columns:1fr; }
      .dpad{ margin: 4px 0 0 0 }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="title">ğŸŸ© è²ªé£Ÿè›‡ Snake Â· è‹±æ–‡å–®å­—æ¨¡å¼</div>
      <div class="chip" id="status" style="display:none"></div>
    </div>

    <div class="panel hud">
      <div class="stat">åˆ†æ•¸ï¼š<b id="score">0</b></div>
      <div class="stat">æœ€ä½³ï¼š<b id="best">0</b></div>
      <div class="stat chip">é€Ÿåº¦ï¼š<b id="speedLabel">ä¸­ç­‰</b></div>
      <div class="stat chip">å‰©é¤˜å–®å­—ï¼š<b id="leftCnt">0</b></div>
      <div class="wordbox">
        <span>å–®å­—ï¼š</span>
        <span id="wordView"><span class="ok"></span><span class="todo"></span></span>
        <span>ä¸‹ä¸€å­—æ¯ï¼š<span id="nextLetter" aria-live="polite">â€”</span></span>
      </div>
    </div>

    <div class="panel canvas-wrap">
      <canvas id="game" width="560" height="560" aria-label="snake game canvas"></canvas>
    </div>

    <div class="panel controls">
      <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center">
        <button class="btn primary" id="toggle">é–‹å§‹</button>
        <button class="btn" id="reset">é‡ä¾†</button>
        <label class="btn" style="display:flex; align-items:center; gap:8px">
          <span>ç¢°å£ï¼š
            <select id="wallMode" style="background:#0b1224; color:var(--text); border:1px solid #1f2937; padding:6px 8px; border-radius:8px">
              <option value="solid">çµæŸ</option>
              <option value="wrap">ç©¿ç‰†</option>
            </select>
          </span>
        </label>
        <label class="btn" style="display:flex; align-items:center; gap:8px">
          <span>é€Ÿåº¦ï¼š
            <select id="speed" style="background:#0b1224; color:var(--text); border:1px solid #1f2937; padding:6px 8px; border-radius:8px">
              <option value="150">æ‚ é–’</option>
              <option value="110" selected>ä¸­ç­‰</option>
              <option value="80">å¿«é€Ÿ</option>
              <option value="55">ç‹‚ç†±</option>
            </select>
          </span>
        </label>
        <span class="btn" style="pointer-events:none;opacity:.8">å–®å­—ä¾†æºï¼šenglish.txtï¼ˆåŒç›®éŒ„ï¼‰</span>
      </div>

      <div class="dpad" aria-label="virtual dpad">
        <div class="pad empty"></div>
        <div class="pad" data-dir="up" title="ä¸Š">â–²</div>
        <div class="pad empty"></div>
        <div class="pad" data-dir="left" title="å·¦">â—€</div>
        <div class="pad empty"></div>
        <div class="pad" data-dir="right" title="å³">â–¶</div>
        <div class="pad empty"></div>
        <div class="pad" data-dir="down" title="ä¸‹">â–¼</div>
        <div class="pad empty"></div>
      </div>
    </div>

    <div class="footer">
      æ“ä½œï¼šæ–¹å‘éµ / WASDã€ç©ºç™½éµæš«åœã€Enter é‡ä¾†ã€æ‰‹æ©Ÿå¯æ»‘å‹•æ“æ§ã€‚<br/>
      
      <div class="links">
        <a class="link" href="#" id="exportBtn">åŒ¯å‡ºæˆ .zip</a>
      </div>
    </div>
  </div>

  <script>
    // --- åŸºæœ¬è¨­å®š ---
    const GRID = 28;          // æ ¼å­æ•¸ï¼ˆæ­£æ–¹å½¢ï¼‰
    const CELL = 20;          // æ¯æ ¼åƒç´ 
    const CANVAS_SIZE = GRID * CELL;

    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    canvas.width = CANVAS_SIZE; canvas.height = CANVAS_SIZE;

    const scoreEl = document.getElementById('score');
    const bestEl = document.getElementById('best');
    const speedSel = document.getElementById('speed');
    const speedLabel = document.getElementById('speedLabel');
    const wallModeSel = document.getElementById('wallMode');
    const toggleBtn = document.getElementById('toggle');
    const resetBtn = document.getElementById('reset');
    const statusChip = document.getElementById('status');
    const leftCntEl = document.getElementById('leftCnt');

    const wordView = document.getElementById('wordView');
    const nextLetterEl = document.getElementById('nextLetter');

    const dpad = document.querySelectorAll('.dpad .pad[data-dir]');

    const BEST_KEY = 'snake_best_score_v1';

    let rng = (min, max)=> Math.floor(Math.random()*(max-min+1))+min;

    // --- å–®å­—å·¥å…· ---
    function normalizeWord(w){
      const s = (w||'').toUpperCase().replace(/[^A-Z]/g,'');
      return s.length? s : null;
    }
    function parseWordText(text){
      const raw = text.split(/\r?\n|,|;|\t/g).map(s=>s.trim());
      const arr = [];
      const seen = new Set();
      for(const r of raw){
        const n = normalizeWord(r);
        if(n && !seen.has(n)) { arr.push(n); seen.add(n); }
      }
      return arr;
    }
    function shuffle(a){
      for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
      return a;
    }

    // éŠæˆ²ç‹€æ…‹
    let state = {
      running: false,
      over: false,
      cleared: false,
      tickMs: parseInt(speedSel.value, 10),
      wallMode: wallModeSel.value, // 'solid' | 'wrap'
      score: 0,
      best: parseInt(localStorage.getItem(BEST_KEY) || '0', 10),
      dir: {x:1, y:0}, // ç›®å‰æ–¹å‘
      nextDir: {x:1, y:0}, // å°‡åœ¨ä¸‹ä¸€tickå¥—ç”¨
      queue: [], // ç·©è¡æ–¹å‘ï¼Œé¿å…é€£é»æ™‚é€†å‘
      snake: [],
      food: null, // {x,y,char}
      timer: null,
      lastTouch: null,

      // å–®å­—æ¨¡å¼
      originalWords: [], // ä¾†æºå–®å­—
      wordsQueue: [],    // å°šæœªå®Œæˆçš„å–®å­—ï¼ˆéš¨æ©Ÿé †åºï¼‰
      currentWord: null, // ç›®å‰å–®å­—ï¼ˆå­—ä¸²ï¼‰
      progress: 0,       // å·²å®Œæˆçš„å­—æ¯æ•¸
    };

    function init(){
      state.running = false; state.over = false; state.cleared = false; state.score = 0; state.queue = [];
      state.dir = {x:1, y:0}; state.nextDir = {x:1, y:0};
      const start = {x: Math.floor(GRID/3), y: Math.floor(GRID/2)};
      state.snake = [start, {x:start.x-1,y:start.y}, {x:start.x-2,y:start.y}];

      // è‹¥ç„¡å–®å­—ï¼Œè¼‰å…¥ç¤ºä¾‹
      if(!state.originalWords.length){
        state.originalWords = ["APPLE","BANANA","ORANGE","MELON","GRAPE","WATER","SNAKE","GAME","CODE","DEBUG"]; 
      }
      state.wordsQueue = shuffle([...state.originalWords]);
      startNewWord();

      updateHUD();
      draw();
    }

    function startNewWord(){
      state.currentWord = state.wordsQueue.shift() || null;
      state.progress = 0;
      if(!state.currentWord){
        // é€šé—œ
        state.running = false; state.over = true; state.cleared = true; clearInterval(state.timer);
        setStatus('é€šé—œï¼æ­å–œ');
        draw(); updateHUD();
        return;
      }
      spawnNextLetter();
      updateHUD();
    }

    function updateHUD(){
      scoreEl.textContent = state.score;
      bestEl.textContent = state.best;
      speedLabel.textContent = labelForSpeed(state.tickMs);
      leftCntEl.textContent = Math.max(0, state.wordsQueue.length + (state.currentWord?1:0) - (state.progress?1:0));
      renderWordView();
      nextLetterEl.textContent = state.currentWord? state.currentWord[state.progress] : 'â€”';
    }

    function renderWordView(){
      const ok = state.currentWord? state.currentWord.slice(0, state.progress) : '';
      const todo = state.currentWord? state.currentWord.slice(state.progress) : '';
      wordView.innerHTML = `<span class="ok">${ok}</span><span class="todo">${todo}</span>`;
    }

    function labelForSpeed(ms){
      if(ms <= 60) return 'ç‹‚ç†±';
      if(ms <= 90) return 'å¿«é€Ÿ';
      if(ms <= 130) return 'ä¸­ç­‰';
      return 'æ‚ é–’';
    }

    function spawnNextLetter(){
      if(!state.currentWord) return;
      const letter = state.currentWord[state.progress];
      const occupied = new Set(state.snake.map(p=> p.x+","+p.y));
      let p;
      do{ p = {x: rng(0, GRID-1), y: rng(0, GRID-1)} } while(occupied.has(p.x+","+p.y));
      state.food = {x:p.x, y:p.y, char: letter};
    }

    function start(){ if(state.over) return; if(state.running) return; state.running=true; schedule(); setStatus('é€²è¡Œä¸­'); toggleBtn.textContent='æš«åœ'; }
    function pause(){ if(!state.running) return; state.running=false; clearInterval(state.timer); setStatus('å·²æš«åœ'); toggleBtn.textContent='ç¹¼çºŒ'; }
    function toggle(){ state.running ? pause() : start(); }
    function gameOver(){ state.running=false; state.over=true; clearInterval(state.timer); setStatus('éŠæˆ²çµæŸ'); toggleBtn.textContent='é‡æ–°é–‹å§‹'; if(state.score>state.best){ state.best=state.score; localStorage.setItem(BEST_KEY, String(state.best)); } draw(); updateHUD(); }

    function setStatus(msg){ statusChip.style.display='block'; statusChip.textContent = msg; }

    function schedule(){ clearInterval(state.timer); state.timer = setInterval(tick, state.tickMs); }

    function tick(){
      // å¥—ç”¨æ’éšŠæ–¹å‘ï¼ˆé¿å…ç¬é–“é€†å‘ï¼‰
      if(state.queue.length){
        const next = state.queue.shift();
        if(!isReverse(next, state.dir)) state.nextDir = next;
      }
      state.dir = state.nextDir;

      const head = state.snake[0];
      let nx = head.x + state.dir.x;
      let ny = head.y + state.dir.y;

      if(state.wallMode === 'wrap'){
        nx = (nx + GRID) % GRID; ny = (ny + GRID) % GRID;
      }else{
        if(nx<0 || nx>=GRID || ny<0 || ny>=GRID){
          return gameOver();
        }
      }

      const newHead = {x:nx, y:ny};

      // è‡ªæ’
      if(state.snake.some((p,i)=> i>0 && p.x===newHead.x && p.y===newHead.y)){
        return gameOver();
      }

      state.snake.unshift(newHead);

      if(state.food && newHead.x===state.food.x && newHead.y===state.food.y){
        // åƒåˆ°æ­£ç¢ºä¸‹ä¸€å­—æ¯
        if(state.currentWord && state.food.char === state.currentWord[state.progress]){
          state.score += 1;
          // æå‡ä¸€é»é€Ÿåº¦ï¼ˆæœ€ä½ 55msï¼‰
          if(state.tickMs > 55 && state.score % 5 === 0){
            state.tickMs -= 5; schedule();
          }
          state.progress++;
          if(state.progress >= state.currentWord.length){
            // å®Œæˆæ­¤å–®å­—ï¼Œé€²å…¥ä¸‹ä¸€å€‹
            startNewWord();
          }else{
            spawnNextLetter();
          }
          updateHUD();
        }else{
          // ä¸æ‡‰ç™¼ç”Ÿï¼ˆç›®å‰åªæœƒç”¢ç”Ÿæ­£ç¢ºå­—æ¯ï¼‰ï¼Œä¿éšªï¼šç•¶ä½œæ²’åƒåˆ°
        }
      }else{
        state.snake.pop();
      }

      draw();
    }

    function isReverse(a,b){ return a.x===-b.x && a.y===-b.y }

    function queueDir(dx,dy){
      const d = {x:dx,y:dy};
      const last = state.queue[state.queue.length-1] || state.nextDir;
      if(isReverse(d, state.dir) || (d.x===last.x && d.y===last.y)) return;
      state.queue.push(d);
    }

    // --- ç¹ªåœ– ---
    function draw(){
      // èƒŒæ™¯
      ctx.fillStyle = '#081026';
      ctx.fillRect(0,0, CANVAS_SIZE, CANVAS_SIZE);

      // ç›¤é¢æ ¼ç·šï¼ˆä½èª¿ï¼‰
      ctx.strokeStyle = '#0f1b36';
      ctx.lineWidth = 1;
      ctx.beginPath();
      for(let i=1;i<GRID;i++){
        ctx.moveTo(i*CELL+.5,0); ctx.lineTo(i*CELL+.5, CANVAS_SIZE);
        ctx.moveTo(0, i*CELL+.5); ctx.lineTo(CANVAS_SIZE, i*CELL+.5);
      }
      ctx.stroke();

      // å–®å­—å­—æ¯ç£šï¼ˆé£Ÿç‰©ï¼‰
      if(state.food){
        const fx = state.food.x*CELL, fy = state.food.y*CELL;
        // ç£š
        const r = 6;
        roundRect(ctx, fx+2, fy+2, CELL-4, CELL-4, r);
        const grd = ctx.createLinearGradient(fx, fy, fx, fy+CELL);
        grd.addColorStop(0, 'var(--tile1)');
        grd.addColorStop(1, 'var(--tile2)');
        ctx.fillStyle = grd; ctx.fill();
        // å­—æ¯
        ctx.fillStyle = '#111827';
        ctx.font = 'bold 12px ui-sans-serif, system-ui';
        ctx.textAlign='center'; ctx.textBaseline='middle';
        ctx.fillText(state.food.char, fx + CELL/2, fy + CELL/2 + 0.5);
      }

      // è›‡
      for(let i=0;i<state.snake.length;i++){
        const p = state.snake[i];
        const x = p.x*CELL, y = p.y*CELL;
        if(i===0){
          const grd = ctx.createLinearGradient(x, y, x, y+CELL);
          grd.addColorStop(0, '#22c55e'); grd.addColorStop(1, '#15803d');
          ctx.fillStyle = grd;
          roundRect(ctx, x+2, y+2, CELL-4, CELL-4, 6);
          ctx.fill();
          // çœ¼ç›
          ctx.fillStyle = '#0a0f1f';
          ctx.beginPath(); ctx.arc(x+CELL*0.35, y+CELL*0.4, 2.2, 0, Math.PI*2); ctx.fill();
          ctx.beginPath(); ctx.arc(x+CELL*0.65, y+CELL*0.4, 2.2, 0, Math.PI*2); ctx.fill();
        }else{
          ctx.fillStyle = i%2 ? '#16a34a' : '#22c55e';
          roundRect(ctx, x+3, y+3, CELL-6, CELL-6, 5);
          ctx.fill();
        }
      }

      // è‹¥çµæŸï¼Œé¡¯ç¤ºé®ç½©
      if(state.over){
        ctx.fillStyle = '#00000088';
        ctx.fillRect(0,0,CANVAS_SIZE,CANVAS_SIZE);
        ctx.fillStyle = '#e5e7eb';
        ctx.font = 'bold 28px ui-sans-serif, system-ui';
        ctx.textAlign='center'; ctx.textBaseline='middle';
        ctx.fillText(state.cleared? 'é€šé—œï¼å…¨éƒ¨å®Œæˆ' : 'éŠæˆ²çµæŸ', CANVAS_SIZE/2, CANVAS_SIZE/2 - 14);
        ctx.font = '16px ui-sans-serif, system-ui';
        ctx.fillStyle = '#94a3b8';
        ctx.fillText('æŒ‰ã€Œé‡ä¾†ã€æˆ– Enter é‡æ–°é–‹å§‹', CANVAS_SIZE/2, CANVAS_SIZE/2 + 16);
      }
    }

    function roundRect(ctx, x, y, w, h, r){
      ctx.beginPath();
      ctx.moveTo(x+r, y);
      ctx.arcTo(x+w, y, x+w, y+h, r);
      ctx.arcTo(x+w, y+h, x, y+h, r);
      ctx.arcTo(x, y+h, x, y, r);
      ctx.arcTo(x, y, x+w, y, r);
      ctx.closePath();
    }

    // --- äº‹ä»¶ ---
    document.addEventListener('keydown', (e)=>{
      if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' ' ,'Enter','w','a','s','d','W','A','S','D'].includes(e.key)) e.preventDefault();
      switch(e.key){
        case 'ArrowUp': case 'w': case 'W': queueDir(0,-1); break;
        case 'ArrowDown': case 's': case 'S': queueDir(0, 1); break;
        case 'ArrowLeft': case 'a': case 'A': queueDir(-1,0); break;
        case 'ArrowRight': case 'd': case 'D': queueDir(1,0); break;
        case ' ': state.running ? pause() : start(); break;
        case 'Enter': init(); start(); break;
      }
    });

    // è™›æ“¬æ–¹å‘éµ
    dpad.forEach(btn=> btn.addEventListener('click', ()=>{
      const d = btn.dataset.dir;
      if(d==='up') queueDir(0,-1);
      if(d==='down') queueDir(0,1);
      if(d==='left') queueDir(-1,0);
      if(d==='right') queueDir(1,0);
      canvas.focus();
    }));

    // è§¸æ§æ»‘å‹•
    canvas.addEventListener('touchstart', (e)=>{
      const t = e.touches[0]; state.lastTouch = {x:t.clientX, y:t.clientY, t:Date.now()};
    }, {passive:true});
    canvas.addEventListener('touchend', (e)=>{
      if(!state.lastTouch) return;
      const t = e.changedTouches[0];
      const dx = t.clientX - state.lastTouch.x;
      const dy = t.clientY - state.lastTouch.y;
      const adx = Math.abs(dx), ady = Math.abs(dy);
      if(Math.max(adx,ady) < 20) return;
      if(adx > ady){ queueDir(dx>0?1:-1, 0); } else { queueDir(0, dy>0?1:-1); }
      state.lastTouch = null;
    }, {passive:true});

    // æ§åˆ¶å€
    toggleBtn.addEventListener('click', ()=>{ if(state.over){ init(); start(); } else { toggle(); } });
    resetBtn.addEventListener('click', ()=>{ init(); draw(); });
    speedSel.addEventListener('change', ()=>{ state.tickMs = parseInt(speedSel.value,10); updateHUD(); if(state.running) schedule(); });
    wallModeSel.addEventListener('change', ()=>{ state.wallMode = wallModeSel.value; });

    // å¾åŒå±¤ english.txt è¼‰å…¥å–®å­—
    async function loadWordsFromFile(){
      try{
        const resp = await fetch('english.txt?v=' + Date.now(), {cache:'no-store'});
        if(!resp.ok) throw new Error('HTTP '+resp.status);
        const text = await resp.text();
        const words = parseWordText(text);
        if(words.length){
          state.originalWords = words;
          setStatus(`å·²è¼‰å…¥ ${words.length} å€‹å–®å­—ï¼ˆenglish.txtï¼‰`);
          return true;
        }
        throw new Error('no valid words');
      }catch(err){
        console.warn('loadWordsFromFile failed:', err);
        return false;
      }
    }

    async function boot(){
      const ok = await loadWordsFromFile();
      if(!ok){
        state.originalWords = ["APPLE","BANANA","ORANGE","MELON","GRAPE","WATER","SNAKE","GAME","CODE","DEBUG"]; 
        setStatus('æ‰¾ä¸åˆ° english.txt æˆ–ç„¡æœ‰æ•ˆå–®å­—ï¼Œå·²è¼‰å…¥ç¤ºä¾‹');
      }
      init();
    }

    // åŒ¯å‡º zipï¼ˆæä¾›å¿«é€Ÿéƒ¨ç½²ï¼‰
    document.getElementById('exportBtn').addEventListener('click', (e)=>{
      e.preventDefault();
      const blob = new Blob([document.documentElement.outerHTML], {type:'text/html;charset=utf-8'});
      const file = new File([blob], 'index.html', {type:'text/html'});
      const url = URL.createObjectURL(file);
      const a = document.createElement('a');
      a.href = url; a.download = 'index.html'; a.click();
      setTimeout(()=> URL.revokeObjectURL(url), 2000);
    });

    // å•Ÿå‹•
    boot();
  </script>
</body>
</html>
